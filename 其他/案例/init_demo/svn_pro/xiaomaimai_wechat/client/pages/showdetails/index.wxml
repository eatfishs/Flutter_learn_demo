<!--pages/showdetails/index.wxml-->
<view class="container">
    <view class="photo-detail">
        <swiper indicator-dots="{{ indicatorDots }}" autoplay="{{ autoplay }}" current="{{ current }}" duration="{{duration}}" class="swiper">
            <block wx:for="{{ list }}" wx:for-index="index" wx:for-item="item" wx:key="key">
                <swiper-item class="swiper-item">
                    <view class="prew_video" wx:if="{{item.VideoUrl}}">
                      <video id="prew_video" object-fit="fill" class="prew_video"
                                  autoplay="{{true}}" 
                                  muted="{{true}}"
                                  src="{{item.VideoUrl}}" />
                    </view>
                    <image wx:else src="{{item.PictureList[0] !== null && item.PictureList[0] !== undefined ? item.PictureList[0] : 'http://resource.xlwonder.wang/DQ_Product_Default.png'}}" mode="aspectFit"></image>
                    <view class="desc {{ collapse ? '' : 'in' }}">
                        <view class="collapse" bind:tap="onCollapse">{{ collapse ? "收缩" : "展开" }}</view>
                        <view class="desc-content">
                            <view class="desc-box">
                                <view class="topic">
                                    {{ item.Description }}
                                </view>
                                <view wx:if="{{!item.RangePriceRequired}}" class="price">
                                    <iconfont name="cny" custom-class="icon-cny"></iconfont>
                                    <text class="money">{{ item.Price==0?'待议':item.Price }}</text>
                                </view>
                                <view wx:else class="price">
                                    <iconfont name="cny" custom-class="unit"></iconfont>
                                    <text wx:if="{{item.MinPrice>0}}">{{ item.MinPrice }}</text>
                                    <text wx:else>待议</text>
                                    ~
                                    <iconfont name="cny" custom-class="unit"></iconfont>
                                    <text wx:if="{{item.MaxPrice>0}}">{{ item.MaxPrice }}</text>
                                    <text wx:else>待议</text>
                                </view>
                                <view wx:if="{{ !seller }}" class="add-to-cart">
                                    <button size="mini" class="btn-add-cart" data-guid="{{ item.Guid }}" catch:tap="onAddToCart">加入购物车</button>
                                </view>
                                <view wx:else class="product-edit">
                                    <button size="mini" class="btn-edit" data-guid="{{ item.Guid }}" catch:tap="onEditProduct">编辑</button>
                                    <button size="mini" class="btn-edit" data-guid="{{ item.Guid }}" catch:tap="onRemoveProduct">下架</button>
                                </view>
                                <view class="tags">
                                    <block wx:for="{{ item.TagList }}" wx:for-index="i" wx:for-item="tag" wx:key="key">
                                        <block wx:if="{{ tag != null }}">
                                            <van-tag size="medium" custom-class="tag-item">{{ tag }}</van-tag>
                                        </block>
                                    </block>
                                </view>
                            </view>
                        </view>
                    </view>
                </swiper-item>
            </block>
        </swiper>
    </view>
</view>

